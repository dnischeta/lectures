# CSS

**Cascading style sheets (каскадные таблицы стилей)** - стандартизированный язык, разработанный для стилизации гипертекстовых документов (HTML, XML, и тд). CSS - одна из широкого спектра технологий, одобренных консорциумом W3C и получивших название "стандарты WEB".

## История

До появления CSS стилизация веб-страниц осуществлялась средствами HTML прямо в контенте документа. Такой подход усложняет понимание структуры документа и ограничивает возможности по стилизации. С [появлением CSS](https://meyerweb.com/eric/thoughts/2021/05/25/25-years-of-css/) (7 мая 1996) стало возможно разделение содержания и представления документа. За счет этого стало возможным легкое применения единого оформления для схожих документов, а также быстрое изменение этого оформления.

## Синтаксис

CSS-файл это тестовый файл с расширением `.css`, который содержит в себе правила стилизации документа. Пример CSS-документа:

```
body {
    font-size: 16px;
    background-color: green;
}

div {
    border: 1px solid black;
}
```

**CSS-декларация** - пара "свойство: значение", например `color: black`, где `color` - CSS-свойство, а `black` - значение.

**Блок деклараций** - набор _CSS-деклараций_, разделенных между собой с помощью `;`, окруженный парой фигурных скобок `{ ... }`. Например:

```
{
    background-color: red:
    color: white;
}
```

**CSS-селектор** - определяет конкретный элемент(ы) внутри документа, см [документацию](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors). Например, `body` - соответствует элементу `body`, а `.content` - элементу с атрибутом `class="content"`.

**Набор правил (правило)** - это _блок деклараций_, которому предшествует список _селекторов_, разделенных запятой:

```
.content {
    background-color: red;
    color: white;
}
```

Таким образом задаются стили для определенных элементов. Не трудно догадаться, что одному элементу может соответствовать несколько наборов правил, в которых могут оказаться конфликтующие декларации:

```
<p class="text">Hello<p>

<style>
p {
    background-color: red;
}

.text {
    background-color: green;
}
</style>
```

За определение деклараций, которые должны быть применены к элементу отвечает алгоритм, который называется [каскад](#каскад).

## Каскад

**Каскад** - алгоритм, лежащий в основе CSS (_cascading_ style sheets), который отвечает за то, какие правила должны быть применены к конкретному элементу.

**Участники каскада**

В каскаде участвуют только _CSS-декларации_, то есть пары ключ-значение. В каскаде участвуют и декларации, определенные внутри [at-rules](https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule), но декларации из `@keyframes` не участвуют в каскаде.

**Источники CSS-деклараций**

CSS-декларации могут быть определены в различных источниках:

- User agent style sheets - стандартные стили браузера (иного клиента). Эти правила user agent применяет к любому просматриваемому документу. [Вот например стили](https://chromium.googlesource.com/chromium/blink/+/refs/heads/main/Source/core/css/html.css), которые будут применены chromium-based браузером к документу;
- Стили, определенные автором документа. Это и есть стили, с которыми работают разработчики;
- Стили, определенные читателем документа. Это стили, которые пользователь может добавить самостоятельно.

В зависимости от источника каскад определяет, какие из стилей должны быть применены.

**Примерный алгоритм**

1. Выбираются правила, которые предназначены для данного элемента из всех источников (для этого используется соответствие по селектору);
2. Правила сортируются по важности (наличие `!important` в CSS-декларации) и по источнику декларации:

| Order | Origin         | Importance   |
| ----- | -------------- | ------------ |
| 1     | User agent     | normal       |
| 2     | User           | normal       |
| 3     | Author         | normal       |
| 4     | CSS Animations | -            |
| 5     | Author         | `!important` |
| 6     | User           | `!important` |
| 7     | User agent     | `!important` |

3. В случае равенства учитывается _специфичность_.

## Специфичность

**Специфичность** - это способ, с помощью которого браузер определяет, какие _CSS-декларации_ должны быть применены. Специфичность основана на правилах соответствия, состоящих из _CSS-селекторов_ различных типов.

Специфичность представляет собой "вес", присвоенный конкретному CSS-правилу. Вес правила определяется количеством каждого из типов селекторов в данном правиле. Если у нескольких правил специфичность одинакова, то к элементу применяется последнее по порядку правило CSS.

**Типы селекторов**

- селекторы типов элементов (`h1`) и [псевдоэлементов](https://developer.mozilla.org/ru/docs/Web/CSS/Pseudo-elements) (`::before`);
- селекторы классов (`.content`), атрибутов (`[type="radio"]`) и [псевдоклассов](https://developer.mozilla.org/ru/docs/Web/CSS/Pseudo-classes) (`:active`);
- селекторы идентификаторов (`#content`).

| Тип селектора                   | Специфичность |
| ------------------------------- | ------------- |
| По типу элемента                | 0             |
| По классу/атрибуту/псевдоклассу | 1             |
| По идентификатору               | 2             |
| `style="..."`                   | наибольшая    |

_Note:_ при использовании `!important` объявление получает наивысший приоритет, его не получится переопределить, используя специфичность, оно будет использовано на этапе исполнения каскада. Таким образом, старайтесь избегать использование `!important`, потому что его использование нарушает естественное каскадирование стилей (в соседних строках написаны декларации, которые используются при каскадировании по-разному). Тем не менее, иногда вам понадобится использовать `!important` (необходимо переопределить стили, заданные в атрибуте `style`).

## Подключение CSS

**Атрибут style**
Есть возможность добавлять стили к конкретному элементу, используя атрибут `style`:

```
<p class="text" style="color: black; background-color: red;">
  Some text
</p>
```

**Элемент style**
Написание стилей внутри элемента `style`:

```
<style>
.content {
  color: red;
}
</style>
```

**Подключение стилевых файлов**
Большинство стилей должно быть написано внутри внешних файлов, это упрощает поддержку и изменение стилей и обеспечивает предсказуемое применение стилей (специфичность управляется только весом селекторов).
Внутри тега `<head>` нужно добавить тег `<link>`:

```
<link href="main.css" rel="stylesheet">
```

## Селекторы

https://developer.mozilla.org/ru/docs/Web/CSS/CSS_Selectors

## Блочная модель и размеры блоков

https://developer.mozilla.org/ru/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model

## Блочные и строчные элементы

https://developer.mozilla.org/ru/docs/Web/HTML/Inline_elements
https://developer.mozilla.org/ru/docs/Web/HTML/Block-level_elements

## Ресурсы

1. [Спецификация](https://www.w3.org/Style/CSS/);
2. [Синтаксис](https://developer.mozilla.org/en-US/docs/Web/CSS/Syntax);
3. [Каскад](https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade);
4. [Специфичность](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity);
5. [Мой ванильный CSS, Вадим Макеев](https://www.youtube.com/watch?v=CaDnbOjXjRg).
